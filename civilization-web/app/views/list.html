<div class="container-fluid">
  <div class="jumbotron">
    <h1>Welcome to Civilization Play By Forum Randomizer</h1>
    <p class="lead">
      This site is useful for Play By Forum games, where you need a moderator to play a game.
      It cuts out the "middleman", and lets you play without the need of a moderator.
    </p>
  </div>

  <div class="table-responsive" ng-controller="GameListController as gameListCtrl">
    <input type="text" ng-model="filterContent" alt="Filter the table" placeholder="Search games"/>
    <table class="table table-striped table-hover table-condensed text-center">
      <thead>
      <tr>
        <th>#</th>
        <th>Created</th>
        <th>Name</th>
        <th>Type</th>
        <th>Number of players</th>
        <th>Players</th>
        <th>Active</th>
        <th>Action</th>
      </tr>
      </thead>

      <tbody>
      <!-- Games that are not active anymore should have a light grey background -->
      <tr ng-repeat="game in gameListCtrl.games | filter: filterContent" class="{{game.active ? 'active' : ''}}"
          ng-class-even="'row-even'" ng-class-odd="'row-odd'">
        <td>{{$index+1}}</td>
        <td>{{game.created | date}}</td>
        <td><a ng-href="#/game/{{game.id}}">{{game.name}}</a></td>
        <td>{{game.type }}</td>
        <td>{{game.numOfPlayers}}</td>
        <td>
            <span ng-repeat="player in game.players">
                {{player.username}}<br/>
            </span>
        </td>
        <td>{{game.active ? 'Active' : 'Finished'}}</td>
        <td>
          <!-- TODO Also add the logged in check -->
          <button id="btnJoinGame" ng-if="(game.numOfPlayers < game.players.length) && gameListCtrl.user.loggedIn" type="button"
                  class="btn btn-success" ng-click="gameListCtrl.joinGame(game)">
            Join
          </button>
        </td>
      </tr>
      </tbody>
    </table>
    {{gameListCtrl.games}}

  </div>


</div>
